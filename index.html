<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<link href="./public/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<script src="./public/bootstrap/js/bootstrap.min.js"></script>
<script src="./public/javascript/knockout-2.3.0.js"></script>
</head>

<body>
 <ul data-bind="foreach: todo" >
  <li>
    <span data-bind = "text: title"></span>
    <button data-bind = "click: $parent.removeTodo">removeTodo</button>
    <button data-bind = "click: addItem">add</button>
    <ul data-bind="foreach: items">
      <li data-bind="text: $data"></li>
      <button data-bind="click: $parent.removeItem">remove</button>
    </ul>
  </li>
 </ul>
 <button data-bind="click: addTodo">Add new</button>
</body>


<script>
 var Todo = function(title, items){
  var self=this;
  this.title = ko.observable(title);
  this.items = ko.observableArray(items);

//add and remove items to todo list
  this.addItem = function() {
    self.items.push(this);
  }
  this.removeItem = function() {
    console.log("got here");
    self.items.remove(this);
  }
 }

//test data of viewModel
function TodosViewModel() {
  var self = this;
  this.todo = ko.observableArray([
    new Todo("testdata", [1,2,3,4]),
    new Todo("2ndTestData", [5,6,7,8])
  ]);

  this.addTodo = function(title, items){
    self.todo.push(new Todo("newtodo", ["item1","item2"]));
  }

  this.removeTodo = function(){
    self.todo.remove(this);
  }

}

ko.applyBindings(new TodosViewModel());
</script>