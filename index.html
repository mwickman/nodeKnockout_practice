<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<link href="./public/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<script src="./public/bootstrap/js/bootstrap.min.js"></script>
<script src="./public/javascript/knockout-2.3.0.js"></script>
</head>

<body>
  <!-- ko foreach: todo -->
  <table >
    <tr>
      <th data-bind = "text: title"/>
        <td>
          <button data-bind = "click: $parent.removeTodo">Remove Todo</button>
          <button data-bind = "click: addItem">add item</button>
        </td>
      </th>
    </tr>
    <!-- ko foreach: items -->
    <tr>
        <td data-bind="text: $data"/>
        <td><button data-bind="click: $parent.removeItem">remove</button></td>
    </tr>
    <!-- /ko -->
  </table>
  <!-- /ko -->
  <form data-bind="submit: addTodo">
    Add Todo
    <input data-bind="value: todoToAdd"></input>
    <button type="submit">Add</button>
  </form>
</body>


<script>
 var Todo = function(title, items){
  var self=this;
  this.title = ko.observable(title);
  this.items = ko.observableArray(items);

//add and remove items to todo list
  this.addItem = function() {
    self.items.push(this);
  }
  this.removeItem = function(item) {
    self.items.remove(item);
  }
 }

//test data of viewModel
function TodosViewModel() {
  var self = this;
  this.todoToAdd = ko.observable("");
  this.todo = ko.observableArray([
    new Todo("testdata", [1,2,3,4]),
    new Todo("2ndTestData", [5,6,7,8])
  ]);

  this.addTodo = function(){
    if (self.todoToAdd() != "") {
      self.todo.push(new Todo(self.todoToAdd()));
      self.todoToAdd("");
    }
  }

  this.removeTodo = function(){
    self.todo.remove(this);
  }

}

ko.applyBindings(new TodosViewModel());
</script>